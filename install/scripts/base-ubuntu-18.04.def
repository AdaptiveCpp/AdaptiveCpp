BootStrap: docker
From: ubuntu:18.04

%setup
cp ./install-hipsycl.sh ${SINGULARITY_ROOTFS}/install-hipsycl.sh
cp ./install-cuda.sh ${SINGULARITY_ROOTFS}/install-cuda.sh
cp ./install-base-spack.sh ${SINGULARITY_ROOTFS}/install-base-spack.sh
cp ./spack-install-hipsycl.sh  ${SINGULARITY_ROOTFS}/spack-install-hipsycl.sh 
cp ./spack-install-llvm.sh ${SINGULARITY_ROOTFS}/spack-install-llvm.sh 
cp ./spack-install-boost.sh ${SINGULARITY_ROOTFS}/spack-install-boost.sh 
cp ./spack-install-rocm.sh ${SINGULARITY_ROOTFS}/spack-install-rocm.sh 
cp ./spack-syclcc.json ${SINGULARITY_ROOTFS}/syclcc.json

%post
apt update
apt install -y sed unzip wget gcc g++ git python3 parallel perl perl-modules cmake curl

bash /install-cuda.sh 
#bash /install-base-spack.sh
