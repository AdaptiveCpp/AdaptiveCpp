#!/usr/bin/make -f
export DH_VERBOSE = 1
export DH_OPTIONS=-v
export DEB_BUILD_MAINT_OPTIONS = hardening=+all
export DEB_CFLAGS_MAINT_APPEND  = -Wall -pedantic
export DEB_LDFLAGS_MAINT_APPEND = -Wl,--as-needed
export DEB_BUILD_OPTIONS = nocheck, nostrip

%:
	        dh $@

override_dh_auto_configure:
	dh_auto_configure  -- \
	          -Scmake \
	          -DACPP_TARGETS="generic" \
	          -DWITH_ACCELERATED_CPU=ON \
	          -DWITH_CUDA_BACKEND=OFF \
	          -DWITH_ROCM_BACKEND=OFF \
	          -DWITH_LEVEL_ZERO_BACKEND=OFF \
	          -DWITH_OPENCL_BACKEND=OFF \
	          -DWITH_SSCP_COMPILER=OFF \
	          -DLLVM_DIR=/usr/lib/llvm-17/cmake/ \
	          -DCUDA_CUDA_LIBRARY=/opt/AdaptiveCpp/cuda/lib64/stubs/libcuda.so \
	          -DCUDA_TOOLKIT_ROOT_DIR=/opt/AdaptiveCpp/cuda \
	          -DOpenCL_LIBRARY=/usr/lib/x86_64-linux-gnu/libOpenCL.so \
	          -DOpenCL_INCLUDE_DIR=/usr/include/CL \
	          -DOpenCLICDLoader_DIR=/etc/OpenCL/ \
	          -DROCM_PATH=/opt/rocm \
	          -DCMAKE_INSTALL_PREFIX=/opt/AdaptiveCpp
override_dh_auto_build:
	dh_auto_build -- -j2
